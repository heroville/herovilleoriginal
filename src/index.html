<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>HeroVille Incremental Game</title>
  <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css" />
</head>

<body>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <div ng-app="Incremental" id="wrap" ng-controller="MainController as mainCtrl" class="page-wrap">
    <div class="row">
      <div class="col-lg-4">
        <info-panel></info-panel>
      </div>
      <div class="col-lg-4">
        <img src="images/heroville-logo.png" width="100%" />
      </div>
      <div class="col-lg-4">
        <upgrade-panel></upgrade-panel>
      </div>
    </div>
    <div class="row">
      <resources-panel></resources-panel>
      <game-message></game-message>
    </div>
    <uib-tabset id="gameTabs">
      <uib-tab heading="Town" id="town">
        <section id="container">
          <div class="col-lg-6">
            <buildings-table>
            </buildings-table>
          </div>
          <div class="col-lg-6">
            <dungeon-table>
            </dungeon-table>
          </div>
        </section>
      </uib-tab>
      <uib-tab heading="Hero" id="hero" disabled="heroEnabled">
        <hero-list></hero-list>
      </uib-tab>
      <uib-tab heading="Production" disabled="prodEnabled">
        <section id="containter">
          <div class="col-lg-6">
            <potion-table></potion-table>
            <table class="table table-bordered" ng-hide="!filteredWeapons.length">
              <tr>
                <td>
                  <b><u>{{buildings[3].name}}</u></b>
                </td>
              </tr>
              <tr>
                <td><u>Name</u></td>
                <td><u>Damage</u></td>
                <td><u>Requirement</u></td>
                <td><u>Durability</u></td>
                <td><u>Stock</u></td>
                <td><u>Prod Cost (Res)</u></td>
                <td><u>Prod Time</u></td>
                <td><u>Sell Price (Gold)</u></td>
                <td><u>Produce</u></td>
              </tr>
              <tr ng-repeat="weapon in filteredWeapons = (weapons | filter:{enabled:true})">
                <td>
                  <img ng-src="images/{{weapon.image}}" />{{weapon.name}}
                </td>
                <td>{{weapon.minDamage}}-{{weapon.maxDamage}}</td>
                <td>
                  <span ng-repeat-start="wepclass in weapon.heroClass" ng-if="!$last">{{heroClass[wepclass].name}},
                  </span><span ng-repeat-end ng-if="$last">{{heroClass[wepclass].name}}</span>
                </td>
                <td>{{weapon.durability}}</td>
                <td>{{weapon.count}}/{{weapon.maxCount}}</td>
                <td>{{weapon.cost}}</td>
                <td>{{weapon.prodTime}}</td>
                <td>{{weapon.sellPrice | number}}</td>
                <td>
                  <button id="w{{weapon.id}}" ng-click="purchaseWeapon(weapon.id)">
                    {{weapon.progress}}
                  </button>
                </td>
              </tr>
            </table>
          </div>
          <div class="col-lg-6">
            <table class="table table-bordered" ng-hide="!filteredBlueprint.length">
              <tr>
                <td>
                  <b><u>{{buildings[2].name}}</u></b>
                </td>
              </tr>
              <tr>
                <td><u>Name</u></td>
                <td><u>Cost (gold)</u></td>
              </tr>
              <tr ng-repeat="blueprint in filteredBlueprint = (blueprints | filter:{enabled:true})">
                <td ng-attr-title="{{blueprint.description}}">
                  {{blueprint.name}}
                </td>
                <td>{{blueprint.cost | number}}</td>
                <td>
                  <button ng-click="incrBlueprint(blueprint)" tooltip-placement="right"
                    tooltip="{{blueprint.description}}">
                    Buy {{blueprint.name}}
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </section>
      </uib-tab>
      <uib-tab heading="Professions" disabled="upgEnabled">
        <section id="container">
          <div class="col-lg-6">
            <table class="table table-bordered" ng-hide="!filteredJobs.length">
              <tr>
                <td>
                  <u><b>Jobs</b></u>
                </td>
              </tr>
              <tr>
                <td><u>Name</u></td>
                <td><u>Description</u></td>
              </tr>
              <tr ng-repeat="job in filteredJobs = (jobs | filter:{enabled:true})">
                <td>{{job.name}}</td>
                <td>{{job.description}}</td>
              </tr>
            </table>
          </div>
          <div class="col-lg-6"></div>
        </section>
      </uib-tab>
      <uib-tab heading="Bestiary" disabled="beastEnabled">
        <section id="container">
          <div class="col-lg-6">
            <monsters-table>
            </monsters-table>
          </div>
          <div class="col-lg-6">
            <bosses-table>
            </bosses-table>
          </div>
        </section>
      </uib-tab>
      <uib-tab heading="Options/Help" id="options">
        <div class="col-lg-6" id="optionTab">
          <h3>Options</h3>
          <button id="save" ng-click="save()">Save</button>
          <button id="load" ng-click="load()">Load</button>
          <button id="reset" ng-click="reset()">Reset</button>
          <div id="optionMenu">
            <accordion close-others="true">
              <accordion-group>
                <accordion-heading>
                  <div class="noTextSelect">Hero Options</div>
                </accordion-heading>
                <div>
                  Format Heroes as Table
                  <input type="checkbox" ng-model="showHeroTable.enabled" id="showOld" name="showHeroTable" />
                </div>
                <div>
                  Successes before moving up dungeon
                  <select id="dungeonCount" ng-model="successCount.amount"
                    ng-options="opt for opt in optionsSuccess"></select>
                </div>
                <div>
                  Dungeons moved down on loss
                  <select id="dungeonCount" ng-model="lossCount.amount"
                    ng-options="opt for opt in optionsLoss"></select>
                </div>
              </accordion-group>
            </accordion>
          </div>
          <button id="skip" ng-click="skipTut()">Skip Tutorial</button>
        </div>
        <div class="col-lg-6">
          <h3>Quick Guide</h3>
          <div id="tips">
            <ul>
              <li>Upgrade the Tent to attract new Heroes.</li>
              <li>
                Hero will adventure and earn gold and resources from defeating
                monsters.
              </li>
              <li>
                Gold will be used by the hero to purchase items from your
                town. That gold will then be transfered to the towns gold.
              </li>
              <li>
                A Heroes level will increase their effectiveness while
                working.
              </li>
            </ul>
            <ul ng-model="gameStats">
              <li>Total Battles: {{gameStats.wins + gameStats.losses}}</li>
              <li>Wins: {{gameStats.wins}}</li>
              <li>Losses: {{gameStats.losses}}</li>
              <li>
                Production (Manual)
                <ul>
                  <li ng-repeat="weapon in gameStats.weaponsManual track by $index" ng-if="$index > 0">
                    {{weapons[$index].name}} - {{weapon}}
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </uib-tab>
    </uib-tabset>
    <div id="randomTrigger"></div>
    <page-footer></page-footer>
  </div>

  <!--Extra Stuff-->
  <div id="dialog2" title="New Worker">
    <div id="error"></div>
    Enter a name for the worker. <input type="text" name="name2" id="name2" />
  </div>

  <div id="loading" title="Old Version">
    You are loading from an old version, there may be errors. If the game does
    not load correctly try starting a new game by refreshing the page and
    canceling this dialog. Do you want to load the old save?
  </div>
  <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "https://www.google-analytics.com/analytics.js",
      "ga"
    );

    ga("create", "UA-2206167-3", "auto");
    ga("send", "pageview");
  </script>
</body>

</html>